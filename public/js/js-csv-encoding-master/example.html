<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="encoding-indexes.js"></script>
    <script type="text/javascript" src="encoding.js"></script>
    <script type="text/javascript" src="FileSaver.js"></script>
</head>

<body>
    <a href="#" id="download-csv">Click me to download a valid CSV !</a>

    <script type="text/javascript">
        var csvContent = 'éà; ça; 12\nà@€; çï; 13',
            textEncoder = new CustomTextEncoder('windows-1252', {NONSTANDARD_allowLegacyEncoding: true}),
            fileName = 'some-data.csv';

        var a = document.getElementById('download-csv');
        a.addEventListener('click', function(e) {
            var csvContentEncoded = textEncoder.encode([csvContent]);
            var blob = new Blob([csvContentEncoded], {type: 'text/csv;charset=windows-1252;'});
            saveAs(blob, fileName);
            e.preventDefault();
        });
    </script>
</body>

</html>
