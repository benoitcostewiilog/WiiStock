{% extends 'layout.html.twig' %}

{% block title %}Demande de collecte{% endblock %}

{% block page_content %}

    <div class="row">
        <div class="col">  
            <h1>Demande de collecte n° {{ collecte.numero }}</h1>
        </div>
        <div class="col text-right">
            {% if modifiable %}
                <a href="" onclick="deleteRow($(this), $('#modalDeleteCollecte'), $('#submitDeleteCollecte'))"
                data-id='{{collecte.id}}' data-target='#modalDeleteCollecte' data-toggle='modal'
                class="btn btn-danger btn-action ml-auto">
                Supprimer</a>
                <a href="#" data-id='{{collecte.id}}' data-target='#modalEditCollecte' data-toggle='modal'
                onclick="editRow($(this), Routing.generate('collecte_api_edit', true), $('#modalEditCollecte'), $('#submitEditCollecte'), true)"
                class="btn btn-primary btn-action ml-auto">
                Modifier</a>
                <a href="#" class="btn btn-primary btn-action ml-auto"  data-id='{{collecte.id}}' id='submitFinishCollecte'
                onclick="finishCollecte($(this))">
                Valider</a>
            {% endif %}
        </div>    
    </div>

<div class="row">
    <div class="zone-entete col-6 row">
        {% include "collecte/enteteCollecte.html.twig" %}
    </div>
</div>

<div class="col text-right">
    <a href="{{ path('reference_article_index') }}" data-toggle="modal" class="btn btn-primary btn-action ml-auto">
            Chercher une référence</a>
    <a href="" data-toggle="modal" data-target="#modalNewArticle" onclick="clearNewContent($('#submitNewArticle'))" class="btn btn-primary btn-action ml-auto">
        <span class="fa fa-plus mr-2"></span>Ajouter article</a>
</div>   

<table id="tableArticle_id" class="table table-striped" data-collecte-id="{{ collecte.id }}">
    <thead>
        <tr>
            <th>Référence CEA</th>
            <th>Libellé</th>
            <th>Emplacement</th>
            <th>Quantité</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>

    </tbody>
</table>

{% include "collecte/modalNewArticle.html.twig" %}
{% include "collecte/modalDeleteArticle.html.twig" %}
{% include "collecte/modalEditArticle.html.twig" %}

{% include "collecte/modalDeleteCollecte.html.twig" %}
{% include "collecte/modalEditCollecte.html.twig" %}

{% endblock %}

{% block javascript %}
<script>
    let id = {{ collecte.id }};
</script>
<script src="{{asset('js/collecte.js')}}"></script>

{% endblock %}