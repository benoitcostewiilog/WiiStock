<!-- Modal -->
<form method="" class="modal fade" id="modalNewReception" role="dialog" aria-labelledby="dataModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Nouvelle réception</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body modal-input container-fluid">

                <div class='row'>
                    <div class="form-group w-100 col-4">
                        <label for="fournisseurs">Fournisseur*</label>
                        <select class="form-control ajax-autocomplete-fournisseur data needed" name="fournisseur"
                            required>
                        </select>
                    </div>
                    <div class="form-group col-2">
                        <span class="btn btn-primary" onclick="toggleInput('fournisseurDisplay', 'addFournisseur')"><i class="fa fa-plus"></i></span>
                    </div>
                    <div class="form-group w-100 col-4">
                        <label for="transporteur">Transporteur</label>
                        <select class="form-control data ajax-autocomplete-transporteur ajax-autocomplete" name="transporteur" id="transporteur">
                        </select>
                    </div>
                    <div class="form-group col-1">
                        <span class="btn btn-primary" onclick="toggleInput('transporteurDisplay', 'addTransporteur')"><i class="fa fa-plus"></i></span>
                    </div>
                </div>
                <div class="row line-arrivage-new-data">
                    <div class="row col-6 formulaire">
                        <div class="form-group col-10" id="fournisseurDisplay">
                            <label for="newFournisseur">Nom fournisseur</label>
                            <input type="text" id="newFournisseur" class="form-control valeur newFormulaire" name="Nom" maxlength="64">
                            <label for="newFournisseurCode">Code référence</label>
                            <input type="text" id="newFournisseurCode" class="form-control newFormulaire" name="Code" maxlength="64">
                        </div>
                        <div class="form-group col-2" id="addFournisseur">
                            <span class="btn btn-success" onclick="newLine(Routing.generate('fournisseur_new', true), $(this), 'fournisseurDisplay', 'addFournisseur')"><i class="fas fa-check-circle"></i></span>
                        </div>
                    </div>
                    <div class="row col-6 formulaire">
                        <div class="form-group col-10" id="transporteurDisplay">
                            <label for="newTransporteur">Nom transporteur</label>
                            <input type="text" id="newTransporteur" class="form-control newFormulaire" name="label" maxlength="64">
                            <label for="newTransporteurCode">Nom transporteur</label>
                            <input type="text" id="newTransporteurCode" class="form-control newFormulaire" name="code" maxlength="64">
                        </div>
                        <div class="form-group col-2" id="addTransporteur">
                            <span class="btn btn-success" onclick="newLine(Routing.generate('transporteur_new', true), $(this), 'transporteurDisplay', 'addTransporteur')"><i class="fas fa-check-circle"></i></span>
                        </div>
                    </div>
                </div>

                <div class='row'>
                    <div class="form-group col-6">
                        <label>Numéro de commande</label>
                        <input type="text" class="form-control data" name="reference">
                    </div>
                    <div class="form-group col-6">
                        <label for="date-attendue">Date attendue</label>
                        <input type="date" class="form-control data" name="date-attendue" value="" required="true"
                            id="date-attendue">
                    </div>

                    <div class="form-group col-6">
                        <label for="date-commande">Date commande</label>
                        <input type="date" class="form-control data" name="date-commande" value="" required="true"
                            max="{{ '+25year' | date('Y-m-d') }}">
                    </div>
                </div>
                <div class="form-group">
                    <label for="NumeroReception">Commentaire</label>
                    <input id='commentaire' class="form-control data" name="commentaire" type="hidden">
                    <div class="editor-container" id='editor-container'></div>
                </div>

                <div class="form-group">
                    <label>Anomalie</label>
                    <label class="switch">
                        <input class="checkbox" type="checkbox" name="anomalie">
                        <span class="slider round"></span>
                    </label>
                </div>

                <select name="type" class="d-none data">
                    {% for type in types %}
                    <option value={{type.id}}>{{type.label}}</option>
                    {% endfor %}
                </select>

                <div class="row mt-4">
                    <div class='col-12 mb-2' onclick="visibleBlockModal($(this))">
                        <h3 class='d-flex pointer'>
                            <i class="fas fa-sort-up d-block mr-2"></i>
                            <i class="fas fa-sort-down d-none mr-2"></i>
                            Champs libres
                        </h3>
                    </div>
                    <div class="form-group col-12 blocVisible d-block" id='typeContentEdit'>
                        <div class="d-block">
                            {% for typeChampLibre in typeChampsLibres %}
                            <div class="row mt-2">
                                {% for champLibre in typeChampLibre.champsLibres %}
                                <div class="form-group col-6">
                                    <label for="">
                                        {{champLibre.label | capitalize}}
                                    </label>

                                    {% if champLibre.typage == 'booleen' %}
                                    <input type="checkbox" class="data checkbox"
                                        value="{{ champLibre.valeurChampLibre.valeur is defined ? champLibre.valeurChampLibre.valeur : " " }}"
                                        name="{{ champLibre.id}}" id="">


                                    {% elseif  champLibre.typage == 'number' %}
                                    <input type="number"
                                        class="form-control data {{ champLibre.requiredCreate ? 'needed' : ''}}"
                                        value="{{ champLibre.valeurChampLibre.valeur is defined ? champLibre.valeurChampLibre.valeur : champLibre.defaultValue }}"
                                        name="{{ champLibre.id}}" id="">


                                    {% elseif  champLibre.typage == 'list' %}
                                    <select class="form-control data {{ champLibre.requiredCreate ? 'needed' : ''}} "
                                        name="{{ champLibre.id}}" id="">
                                        <option value=""></option>
                                        {% for elem in  champLibre.elements %}
                                        <option value="{{elem}}">{{elem}}</option>
                                        {% endfor %}
                                    </select>

                                    {% elseif champLibre.typage == 'text'  %}
                                    <input type="text" id="{{ champLibre.label ~ 'edit'}}"
                                        class="form-control data {{ champLibre.requiredCreate ? 'needed' : ''}}"
                                        value="{{ champLibre.valeurChampLibre.valeur is defined ? champLibre.valeurChampLibre.valeur : champLibre.defaultValue }}"
                                        name="{{  champLibre.id }}" id="input">

                                    {% elseif champLibre.typage == 'date' %}
                                    <input type="date" name="{{ champLibre.id }}" id="{{champLibre.label ~ 'edit'}}"
                                        class="form-control data {{ champLibre.requiredCreate ? 'needed' : ''}}"
                                        value="{{ champLibre.valeurChampLibre.valeur is defined ? champLibre.valeurChampLibre.valeur : champLibre.defaultValue }}">

                                    {% else %}
                                    <input disabled>

                                    {% endif %}
                                </div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="error-msg p-4"></div>
            <div class="modal-footer">
                <button type="button" class="btn" data-dismiss="modal">Annuler</button>
                <button id="submitButton" type="button" class="btn btn-success"
                    onclick="setCommentaire('.editor-container')">Enregistrer</button>
            </div>
        </div>
    </div>
</form>
