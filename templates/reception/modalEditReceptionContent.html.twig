<div class="row">
    <div class="form-group col-6">
        <label for="numeroReception">Numéro Réception{{ fieldsParam.numeroReception.mustToModify ? '*' : ''}}</label>
        <input type="text" class="form-control data Numéro Réception{{ fieldsParam.numeroReception.mustToModify ? 'needed' : ''}}" name="numeroReception" id='numeroReception'
            value="{{reception.numeroReception}}">
    </div>
    <div class="form-group col-6">
        <label for="statut">Statut*</label>
        <select class="form-control data" name="statut">
            {% for statut in statuts %}
                {% set selected = (statut.id == reception.statut.id ? 'selected' : '') %}
                <option value="{{ statut.id }}" {{ selected }}>{{ statut.nom }}</option>
            {% endfor %}
        </select>
    </div>

</div>

<div class="row">
    <div class="form-group col-6">
        <label for="dateCommande">Date commande{{ fieldsParam.dateCommande.mustToModify ? '*' : ''}}</label>
        <input type="date" class="form-control data {{ fieldsParam.dateCommande.mustToModify ? 'needed' : ''}}" name="dateCommande" id="dateCommande"
            value="{{reception.dateCommande is empty ? '' : reception.dateCommande | date('Y-m-d')}}" required="true"
            max="{{ '+25year' | date('Y-m-d') }}">
    </div>

    <div class="form-group col-6">
        <label for="dateAttendue">Date attendue{{ fieldsParam.dateAttendue.mustToModify ? '*' : ''}}</label>
        <input type="date" class="form-control data {{ fieldsParam.dateAttendue.mustToModify ? 'needed' : ''}}" name="dateAttendue" id='dateAttendue'
            value="{{reception.dateAttendue is empty ? '' : reception.dateAttendue | date('Y-m-d')}}" required="true"
            max="{{ '+25year' | date('Y-m-d') }}">
    </div>
</div>
<div class="row">
    <div class="form-group col-6">
        <label for="numeroCommande">Numéro de commande{{ fieldsParam.numCommande.mustToModify ? '*' : ''}}</label>
        <input type="text" class="form-control data {{ fieldsParam.numCommande.mustToModify ? 'needed' : ''}}" name="numeroCommande" id='numeroCommande'
               value="{{reception.reference}}">
    </div>
</div>

<div class="row">
    <div class="form-group w-100 col-6">
        <label for="fournisseurs">Fournisseur{{ fieldsParam.fournisseur.mustToModify ? '*' : ''}}</label>
        <select class="form-control ajax-autocomplete-fournisseur-edit data {{ fieldsParam.fournisseur.mustToModify ? 'needed' : ''}}" name="fournisseur" id='fournisseur'>
            <option value="{{reception.fournisseur ? reception.fournisseur.id : ''}}">{{ reception.fournisseur ? reception.fournisseur.nom : ''}}</option>

        </select>
    </div>
    <div class="form-group w-100 col-6">
        <label for="utilisateur">Utilisateur{{ fieldsParam.utilisateur.mustToModify ? '*' : ''}}</label>
        <select class="form-control ajax-autocomplete-user-edit data {{ fieldsParam.utilisateur.mustToModify ? 'needed' : ''}}" name="utilisateur">
            <option value="{{reception.utilisateur ? reception.utilisateur.id : ''}}">{{ reception.utilisateur ? reception.utilisateur.username : ' '}}</option>

        </select>
    </div>
</div>
<div class="form-group">
    <label for="Reception">Commentaire{{ fieldsParam.commentaire.mustToModify ? '*' : ''}}</label>
    <input id='commentaire' class="form-control data {{ fieldsParam.commentaire.mustToModify ? 'needed' : ''}}" name="commentaire" type="hidden"
        value="{{reception.commentaire}}">
    <div class="editor-container-edit" id="editor-container" value="{{reception.commentaire}}"> {{reception.commentaire|raw}}
    </div>
</div>


<!-- CHAMPS LIBRES -->
<div class='col-12 mb-2' onclick="visibleBlockModal($(this))">
    <h3 class='d-flex pointer'>
        <i class="fas fa-sort-up d-block mr-2"></i>
        <i class="fas fa-sort-down  d-none mr-2"></i>
        Champs libres
    </h3>
</div>
<div class="form-group col-12 blocVisible d-block" id='typeContentEdit'>
    {% for typeChampLibre in typeChampsLibres %}
        <div class="{{ reception.type is not empty and typeChampLibre.typeId == reception.type.id ? 'd-block' : 'd-none'}}">
        <div class="row mt-2">
            {% for champLibre in typeChampLibre.champsLibres %}
            <div class="form-group col-6">
                <label for="input">{{ champLibre.label | capitalize}}</label>

                {% if champLibre.typage == 'booleen' %}
                {% set checked = ((champLibre.valeurChampLibre.valeur is defined ? champLibre.valeurChampLibre.valeur : 0) == 1) ? 'checked' : '' %}
                <label class="switch">
                    <input type="checkbox" class="data checkbox" {{ checked }} name="{{ champLibre.id}}">
                    <span class="slider round"></span>
                </label>

                {% elseif  champLibre.typage == 'number' %}
                <input type="number" id="{{ champLibre.id ~ 'edit'}}" class="form-control data"
                    value="{{ champLibre.valeurChampLibre.valeur is defined ? champLibre.valeurChampLibre.valeur : '' }}"
                    name="{{ champLibre.id}}" id="input">

                {% elseif  champLibre.typage == 'list' %}
                <select class="form-control data" id="{{ champLibre.id ~ 'edit'}}" name="{{ champLibre.id}}" id="input">
                    <option value="">aucune selection...</option>
                    {% for elem in  champLibre.elements %}
                    {% set selected = elem ==( champLibre.valeurChampLibre.valeur is defined ? champLibre.valeurChampLibre.valeur : '' )? 'selected' : '' %}
                    <option value="{{elem}}" {{ selected }}>{{elem}}</option>
                    {% endfor %}
                </select>

                {% elseif champLibre.typage == 'text' %}
                <input type="text" id="{{ champLibre.id ~ 'edit'}}" class="form-control data"
                    value="{{ champLibre.valeurChampLibre.valeur is defined ? champLibre.valeurChampLibre.valeur : '' }}"
                    name="{{  champLibre.id }}" id="input">

                {% elseif champLibre.typage == 'date' %}
                <input type="date" name="{{ champLibre.id }}" id="{{champLibre.id ~ 'edit'}}" class="form-control data"
                    value="{{ champLibre.valeurChampLibre.valeur is defined ? champLibre.valeurChampLibre.valeur : '' }}">
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>
