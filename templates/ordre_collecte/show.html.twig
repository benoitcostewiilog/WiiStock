{% extends 'layout.html.twig' %}

{% block title %}Collecte{% endblock %}

{% block page_content %}
<h1>Ordre de collecte n°{{ collecte.numero }}</h1>


<div class="row">
    <div class="col-4">
        <p><strong> Statut : </strong> {{ collecte.statut ? collecte.statut.nom : '' }}</p>
        <p><strong> Numéro : </strong> {{ collecte.numero }}</p>
        <p><strong> Demandeur : </strong> {{collecte.demandeCollecte.demandeur ? collecte.demandeCollecte.demandeur.username :'' }}</p>
        <p><strong> Opérateur : </strong> {{collecte.utilisateur ? collecte.utilisateur.username : '' }}</p>
    </div>
    <div class="col-4">

        <p><strong> Date de collecte : </strong> {{ collecte.date ? collecte.date|date('d/m/Y') : '' }}</p>
        <p><strong> Point de collecte : </strong> {{collecte.demandeCollecte.pointCollecte.label}}</p>
        <p><strong>Destination:</strong>{{ collecte.demandeCollecte.stockOrDestruct ? ' Mise en stock' : ' Destruction' }}
        </p>
    </div>
    {% if collecte.statut.nom == constant('App\\Entity\\OrdreCollecte::STATUT_A_TRAITER') %}

    <div class="col-2 offset-2">
        {% if not finished %}
        {% if hasRight(constant('App\\Entity\\Menu::COLLECTE'), constant('App\\Entity\\Action::CREATE_EDIT')) %}
        <p><a class="btn btn-primary btn-action" href={{path('ordre_collecte_finish', {'id': collecte.id})}}>Finir la
                collecte</a></p>
        {% endif %}
        {% endif %}
    </div>
    {% endif %}
    <div class="col-12">

        <p><strong>Commentaire:</strong>{{ collecte.demandeCollecte.commentaire|raw }} </p>
    </div>
</div>
<table id="tableArticle" class="table table-striped table-bordered w-100">
</table>

<a href="{{ path('ordre_collecte_index') }}" class='btn'>Retour à la liste</a>
<input id="collecte-id" hidden value="{{ collecte.id }}">

{% include 'ordre_collecte/modalEditArticle.html.twig' %}
{% include 'reference_article/modalShowRefArticle.html.twig' %}
{% include 'article/modalShowArticle.html.twig' %}

{% endblock %}
{% block javascript %}

<script src="{{ asset('js/ordre-collecte-show.js') }}?{{ date().timestamp }}"></script>

{% endblock %}