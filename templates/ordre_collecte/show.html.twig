{% extends 'layout.html.twig' %}

{% block title %}Collecte{% endblock %}

{% block page_content %}
    {% include 'ordre_collecte/enteteOrdreCollecte.html.twig' %}

    <div class="row">
        <div class="col text-right">
            {% if not finished %}
                {% if hasRight(constant('App\\Entity\\Menu::COLLECTE'), constant('App\\Entity\\Action::CREATE_EDIT')) %}
                    <a href="" onclick="deleteRow($(this), $('#modalDeleteOrdreCollecte'), $('#submitDeleteOrdreCollecte'))"
                       data-id='{{collecte.id}}' data-target='#modalDeleteOrdreCollecte' data-toggle='modal'
                       class="btn btn-danger btn-action ml-auto">
                        Supprimer
                    </a>
                    <a href=""
                       data-toggle="modal"
                       data-target="#modalFinishCollecte"
                       class="btn btn-primary"
                       onclick="ajaxAutoCompleteEmplacementInit($('.ajax-autocompleteEmplacement'))">
                        Finir la collecte
                    </a>
                {% endif %}
            {% endif %}
        </div>
    </div>

    <table id="tableArticle" class="table table-striped table-bordered w-100">
    </table>

    <a href="{{ path('ordre_collecte_index') }}" class='btn'>Retour Ã  la liste</a>
    <input id="collecte-id" hidden value="{{ collecte.id }}">

    {% include 'ordre_collecte/modalEditArticle.html.twig' %}
    {% include 'reference_article/modalShowRefArticle.html.twig' %}
    {% include 'article/modalShowArticle.html.twig' %}
    {% include 'ordre_collecte/modalDeleteOrdreCollecte.html.twig' %}
    {% include 'ordre_collecte/modalFinishCollecte.html.twig' %}

{% endblock %}
{% block javascript %}
    <script src="{{ asset('js/ordre-collecte-show.js') }}?{{ date().timestamp }}"></script>
{% endblock %}
