<div class="row">
    <div class="col">
        <h1><span title="arrivage">{{ 'arrivage.arrivage'|trans|capitalize }}</span> {{ arrivage.numeroarrivage }}</h1>
        <input hidden value="{{ arrivage.id }}" id="arrivageId">
        <input hidden value="{{ arrivage.numeroarrivage  }}" id="numeroArrivage">
        <input hidden value="{{ printColis is defined ? printColis : false }}" id="printColis">
        <input hidden value="{{ printArrivage is defined ? printArrivage : false }}" id="printArrivage">
        <div class="d-none" id="barcodes"></div>
    </div>

    <div class="col text-right">
        <a href="" class="btn btn-primary btn-action ml-auto" data-target='#modalNewAssociation' data-toggle='modal'>
            <i class="fa fa-bullseye mr-2"></i>Association/BR
        </a>
        <a class="btn btn-success"
           id="printArrivageBtn"
           target="_blank"
           href="{{ path('print_arrivage_bar_code', {arrivage: arrivage.id}) }}">
            <i class='fas fa-print pointer'></i>
            Imprimer <span title="arrivage">{{ 'arrivage.arrivage'|trans }}</span>
        </a>
        {% if hasRight(constant('App\\Entity\\Menu::TRACA'), constant('App\\Entity\\Action::EDIT'))%}
            <a href="" data-id='{{ arrivage.id }}' data-target='#modalEditArrivage'
               onclick="editRowArrivage($(this), Routing.generate('arrivage_edit_api', true), $('#modalEditArrivage'), $('#submitEditArrivage'), true, '#modalEditArrivage .editor-container-edit')"
               data-toggle='modal' class="btn btn-primary btn-action ml-auto">
                Modifier
            </a>
        {% endif %}

        {% if (canBeDeleted) %}
            {% if hasRight(constant('App\\Entity\\Menu::TRACA'), constant('App\\Entity\\Action::DELETE'))%}
                <a href="" data-id='{{ arrivage.id }}' data-target='#modalDeleteArrivage' data-toggle='modal'
                   class="btn btn-danger btn-action ml-auto" onclick="deleteRowArrivage($(this), $('#modalDeleteArrivage'), $('#submitDeleteArrivage'))">
                    Supprimer</a>
            {% endif %}
        {% endif %}
    </div>
</div>

<div class="row">
    {% if fieldsParam|isFieldRequired('fournisseur', 'displayed') %}
    <div class="col-4">
        <p><strong>Fournisseur :</strong> <span>{{ arrivage.fournisseur ? arrivage.fournisseur.nom : "" }}</span></p>
    </div>
    {% endif %}
    {% if fieldsParam|isFieldRequired('transporteur', 'displayed') %}
    <div class="col-4">
        <p><strong>Transporteur :</strong> {{ arrivage.transporteur ? arrivage.transporteur.label : "" }}</p>
    </div>
    {% endif %}
    {% if fieldsParam|isFieldRequired('chauffeur', 'displayed') %}
    <div class="col-4">
        <p><strong>Chauffeur :</strong> <span>{{ arrivage.chauffeur ? arrivage.chauffeur.nom : "" }}</span></p>
    </div>
    {% endif %}
    {% if fieldsParam|isFieldRequired('noTracking', 'displayed') %}
    <div class="col-4">
        <p><strong>N°tracking transporteur :</strong> <span>{{ arrivage.notracking }}</span></p>
    </div>
    {% endif %}
    {% if fieldsParam|isFieldRequired('numeroBL', 'displayed') %}
    <div class="col-4">
        <p><strong>N°commande / BL :</strong> <span>{{ arrivage.numerobl ? arrivage.numerobl : "" }}</span></p>
    </div>
    {% endif %}
    <div class="col-4">
        <p><strong>Statut :</strong> <span>{{ arrivage.statut }}</span></p>
    </div>
    {% if fieldsParam|isFieldRequired('destinataire', 'displayed') %}
    <div class="col-4">
        <p><strong>Destinataire :</strong> <span>{{ arrivage.destinataire ? arrivage.destinataire.username : '' }}</span></p>
    </div>
    {% endif %}
    {% if fieldsParam|isFieldRequired('acheteurs', 'displayed') %}
    <div class="col-4">
        <p><strong>Acheteurs :</strong>
            {{ arrivage.acheteurs|join(', ') }}
        </p>
    </div>
    {% endif %}

    {% for champLibre in champsLibres %}
    <div class="col-4">
        {% set value = null %}
        {% if champLibre.typage == constant('App\\Entity\\ChampLibre::TYPE_BOOL') %}
            {% set value = (champLibre.valeurChampLibre is not null and champLibre.valeurChampLibre.valeur == 1) ? 'oui' : 'non' %}
        {% elseif champLibre.typage == 'list multiple' and champLibre.valeurChampLibre is not null%}
            {% set value = champLibre.valeurChampLibre.valeur | replace({';' : ','}) %}
        {% elseif champLibre.valeurChampLibre is not null %}
            {% set value = champLibre.valeurChampLibre.valeur %}
        {% endif %}
        {% if value is not null %}
            <p><strong>{{ champLibre.label|capitalize }} :</strong> {{ value }}</p>
        {% endif %}
    </div>
{% endfor %}
</div>


<div class="row">
    {% if fieldsParam|isFieldRequired('commentaire', 'displayed') %}
    <div class="col-8">
        <p><strong>Commentaire :</strong> <span>{{ arrivage.commentaire | raw}} </span></p>
    </div>
    {% endif %}
    {% if fieldsParam|isFieldRequired('pj', 'displayed') %}
    <div class="col-4">
        <p><strong>Pièces jointes :</strong><br>
        {% for attachement in arrivage.attachements %}
            <a href="/uploads/attachements/{{ attachement.filename }}" target="_blank">
                <i class="fas fa-file"></i> {{ attachement.originalname }}<br>
            </a>
        {% endfor %}
        </p>
    </div>
    {% endif %}
</div>

{% if arrivage.isUrgent is defined and arrivage.isUrgent == true %}
    <div class="urgence-row row ml-2">
        <h1><i class="fa fa-exclamation-triangle mr-2"></i><span title="cet arrivage">{{ 'arrivage.cet arrivage'|trans|capitalize }}</span> est à traiter en URGENCE.</h1>
    </div>
{% endif %}