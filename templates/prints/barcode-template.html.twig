<html lang="fr">
    <head>
        <style>
            .barcode-container {
                padding: .7mm;
                overflow: hidden;
                box-sizing: border-box;

                width: {{ width }}mm;
                height: {{ height }}mm;
            }

            .barcode {
                max-width: 100%;
                height: 50%;
                margin: 0;
                padding: 0;
                position: relative;
                text-align: center;
            }

            svg {
                max-width: 100%;
                height: 100%;
            }
            .labels {
                height: 50%;
            }

            html, body {
                margin: 0;
                padding: 0;
            }

            .labels {
                padding-top: .7mm;
                text-align: center;
            }

            .labels svg {
                font-family: Arial, sans-serif;
            }

            .page-breaker {
                page-break-before: always;
                height: 0;
            }
        </style>
        <title>{{title}}</title>
    </head>
    <body>
        {% for config in barcodeConfigs %}
            {% if not loop.first %}<div class="page-breaker"></div>{% endif %}
            <div class="barcode-container">
                <div class="barcode">
                    {{
                        printBarcode({
                            code: config.barcode.code,
                            type: config.barcode.type,
                            format: 'svg',
                            height: config.barcode.height,
                            width: config.barcode.width
                        })|raw
                    }}
                </div>
                <div class="labels">
                    {# 0.65 = multiplicateur en fonction de la police = largeur d'un caractère a peu près #}
                    {% set widthFontScale = 0.65 %}
                    {# 1.3 = multiplicateur en fonction de la police = hauteur d'un caractère a peu près #}
                    {% set heightFontScale = 1.3 %}
                    <svg viewBox="0 0 {{ config.barcode.longestLabel * widthFontScale }} {{ ((config.labels|length) + 1) * heightFontScale }}"
                         xmlns="http://www.w3.org/2000/svg" >
                        {% for label in config.labels %}
                            <text y="{{ loop.index * heightFontScale }}" x="50%" text-anchor="middle" font-size="1">{{ label|trim }}</text>
                        {% endfor %}
                    </svg>
                </div>
            </div>
        {% endfor %}
    </body>
</html>
