<?php

namespace App\DataFixtures;

use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Common\Persistence\ObjectManager;
use Symfony\Component\Security\Core\Encoder\UserPasswordEncoderInterface;

use App\Entity\ReferenceArticle;
use App\Repository\TypeRepository;

class RefArticleTypeSiliFixtures extends Fixture
{
    private $encoder;


    /**
     * @var TypeRepository
     */
    private $typeRepository;

    public function __construct(UserPasswordEncoderInterface $encoder, TypeRepository $typeRepository)
    {
        $this->encoder = $encoder;
        $this->typeRepository = $typeRepository;
    }

    public function load(ObjectManager $manager)
    {
        $file = fopen("pdt.csv","r");
        print_r(fgetcsv($file));
        fclose($file);
        dump($file);

        // foreach ($refArticleSiliS as $refArticleSili) {
        //     $referenceArticle = new ReferenceArticle();
        //     $referenceArticle
        //         ->setType($this->typeRepository->find(1))
        //         ->setReference($refArticleSili['ref'])
        //         ->setQuantiteStock($refArticleSili[' stock'])
        //         ->setLibelle($refArticleSili['designation']);
        //     $manager->persist($referenceArticle);
        // }
        // $manager->flush();
    }
}

