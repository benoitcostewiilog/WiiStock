{% extends 'layout.html.twig' %}

{% block title %}Paramétrage{% endblock %}

{% block page_content %}

    <div class="row page-title">
        PARAMETRAGE
    </div>

    <ul class="nav nav-tabs nav-justified">
        <li class="active">
            <a data-toggle="pill" href="#menu1">Filiales</a>
        </li>
        <li>
            <a data-toggle="pill" href="#menu2">Sites</a>
        </li>
        <li>
            <a data-toggle="pill" href="#menu3">Catégories</a>
        </li>
        <li>
            <a data-toggle="pill" href="#menu4">Sous-catégories</a>
        </li>
        <li>
            <a data-toggle="pill" href="#menu5">Marques</a>
        </li>
    </ul>

    <div class="tab-content">
        <div id="menu1" class="tab-pane fade in active">
            <div class="row btn-grp">
                <a href="{{ path('filiales_new') }}" class="button btn-left">
                    <span class="fa fa-plus"></span>Nouvelle filiale
                </a>
            </div>
            <table id="filiales" class="table table-condensed table-hover table-striped">
                <thead>
                    <tr>
                        <th data-column-id="id" data-visible="false" data-sortable="false">Id</th>
                        <th data-column-id="nom">Nom</th>
                        <th data-column-id="commands" data-formatter="commands" data-sortable="false">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for filiale in filiales %}
                        <tr>
                            <td>{{ filiale.id }}</td>
                            <td>{{ filiale.nom }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div id="menu2" class="tab-pane fade">
            <div class="row btn-grp">
                <a href="{{ path('sites_new') }}" class="button btn-left">
                    <span class="fa fa-plus"></span>Nouveau site
                </a>
            </div>
            <table id="sites" class="table table-condensed table-hover table-striped">
                <thead>
                    <tr>
                        <th data-column-id="id" data-visible="false" data-sortable="false">Id</th>
                        <th data-column-id="nom">Nom</th>
                        <th data-column-id="commands" data-formatter="commands" data-sortable="false">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for site in sites %}
                        <tr>
                            <td>{{ site.id }}</td>
                            <td>{{ site.nom }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div id="menu3" class="tab-pane fade">
            <div class="row btn-grp">
                <a href="{{ path('categories_vehicules_new') }}" class="button btn-left">
                    <span class="fa fa-plus"></span>Nouvelle catégorie
                </a>
            </div>
            <table id="categories" class="table table-condensed table-hover table-striped">
                <thead>
                    <tr>
                        <th data-column-id="id" data-visible="false" data-sortable="false">Id</th>
                        <th data-column-id="nom">Nom</th>
                        <th data-column-id="commands" data-formatter="commands" data-sortable="false">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for categorie in categories %}
                        <tr>
                            <td>{{ categorie.id }}</td>
                            <td>{{ categorie.nom }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div id="menu4" class="tab-pane fade">
            <div class="row btn-grp">
                <a href="{{ path('sous_categories_vehicules_new') }}" class="button btn-left">
                    <span class="fa fa-plus"></span>Nouvelle sous-catégorie
                </a>
            </div>
            <table id="sousCategories" class="table table-condensed table-hover table-striped">
                <thead>
                    <tr>
                        <th data-column-id="id" data-visible="false" data-sortable="false">Id</th>
                        <th data-column-id="nom">Nom</th>
                        <th data-column-id="code">Code</th>
                        <th data-column-id="commands" data-formatter="commands" data-sortable="false">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sousCategorie in sousCategories %}
                        <tr>
                            <td>{{ sousCategorie.id }}</td>
                            <td>{{ sousCategorie.nom }}</td>
                            <td>{{ sousCategorie.code }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div id="menu5" class="tab-pane fade">
            <div class="row btn-grp">
                <a href="{{ path('marques_new') }}" class="button btn-left">
                    <span class="fa fa-plus"></span>Nouvelle marque
                </a>
            </div>
            <table id="marques" class="table table-condensed table-hover table-striped">
                <thead>
                    <tr>
                        <th data-column-id="id" data-visible="false" data-sortable="false">Id</th>
                        <th data-column-id="nom">Nom</th>
                        <th data-column-id="commands" data-formatter="commands" data-sortable="false">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for marque in marques %}
                        <tr>
                            <td>{{ marque.id }}</td>
                            <td>{{ marque.nom }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        var grid1 = $("#filiales").bootgrid({
            formatters: {
                "commands": function (column, row) {
                    return "<button type=\"button\" class=\"btn btn-xs btn-default command-edit\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-pencil\"></span></button> " + "<button type=\"button\" class=\"btn btn-xs btn-default command-delete\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-trash-o\"></span></button>";
                }
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            /* Executes after data is loaded and rendered */
            grid1.find(".command-edit").on("click", function (e) {
                var url = "{{ path('filiales_edit', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            }).end().find(".command-delete").on("click", function (e) {
                var url = "{{ path('filiales_delete', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            });
        });

        var grid2 = $("#sites").bootgrid({
            formatters: {
                "commands": function (column, row) {
                    return "<button type=\"button\" class=\"btn btn-xs btn-default command-edit\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-pencil\"></span></button> " + "<button type=\"button\" class=\"btn btn-xs btn-default command-delete\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-trash-o\"></span></button>";
                }
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            /* Executes after data is loaded and rendered */
            grid2.find(".command-edit").on("click", function (e) {
                var url = "{{ path('sites_edit', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            }).end().find(".command-delete").on("click", function (e) {
                var url = "{{ path('sites_delete', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            });
        });

        var grid3 = $("#categories").bootgrid({
            formatters: {
                "commands": function (column, row) {
                    return "<button type=\"button\" class=\"btn btn-xs btn-default command-edit\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-pencil\"></span></button> " + "<button type=\"button\" class=\"btn btn-xs btn-default command-delete\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-trash-o\"></span></button>";
                }
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            /* Executes after data is loaded and rendered */
            grid3.find(".command-edit").on("click", function (e) {
                var url = "{{ path('categories_vehicules_edit', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            }).end().find(".command-delete").on("click", function (e) {
                var url = "{{ path('categories_vehicules_delete', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            });
        });

        var grid4 = $("#sousCategories").bootgrid({
            formatters: {
                "commands": function (column, row) {
                    return "<button type=\"button\" class=\"btn btn-xs btn-default command-edit\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-pencil\"></span></button> " + "<button type=\"button\" class=\"btn btn-xs btn-default command-delete\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-trash-o\"></span></button>";
                }
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            /* Executes after data is loaded and rendered */
            grid4.find(".command-edit").on("click", function (e) {
                var url = "{{ path('sous_categories_vehicules_edit', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            }).end().find(".command-delete").on("click", function (e) {
                var url = "{{ path('sous_categories_vehicules_delete', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            });
        });

        var grid5 = $("#marques").bootgrid({
            formatters: {
                "commands": function (column, row) {
                    return "<button type=\"button\" class=\"btn btn-xs btn-default command-edit\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-pencil\"></span></button> " + "<button type=\"button\" class=\"btn btn-xs btn-default command-delete\" data-row-id=\"" + row.id + "\"><span class=\"fa fa-trash-o\"></span></button>";
                }
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            /* Executes after data is loaded and rendered */
            grid5.find(".command-edit").on("click", function (e) {
                var url = "{{ path('marques_edit', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            }).end().find(".command-delete").on("click", function (e) {
                var url = "{{ path('marques_delete', {'id': 'row_id' }) }}";
                url = url.replace("row_id", $(this).data("row-id"));
                window.location.assign(url);
            });
        });
    </script>
{% endblock %}