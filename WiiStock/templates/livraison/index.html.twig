{% extends 'layout.html.twig' %}

{% block title %}Livraison index{% endblock %}

{% block page_content %}
    <h1>Livraison index</h1>

    
    {% if history is defined %}
        <div class="row btn pull-left">
            <a href={{path('livraison_index', {'history':'false'})}} class="button btn-left"><span class="fas fa-history"></span> Livraison en cours</a>
        </div>
    {% else %}
        <div class="row btn pull-left">
            <a href={{path('livraison_index', {'history':'true'})}} class="button btn-left"><span class="fas fa-history"></span> Historique</a>
        </div>
    {% endif %}
    
        <div class='row btn pull-right' >
            <a href={{ path('livraison_creation') }} class="button btn-left">
                <span class="fa fa-plus"></span>Nouvelle livraison
            </a >
        </div>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Numero</th>
                <th>Statut</th>
                <th>destination</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for livraison in livraisons | reverse  %}
            <tr>
                <td>{{ livraison.id }}</td>
                <td>{{ livraison.numero }}</td>
                <td>{{ livraison.statut }}</td>
                <td>{{ livraison.destination.nom }}</td>
                <td>
                
                    <!-- <a href="{{ path('livraison_edit', {'id': livraison.id}) }}">edit</a> -->
                <form action={{path('livraison_index', {'history': 'false'})}} method="post">
                        {% if livraison.statut == 'demande de livraison' %}              
                            <button type="submit" name="id" value={{livraison.id}} class="btn btn-xs btn-default command-edit backgreen"><i class="fas fa-check fa-2x"></i></button>                   
                        {% endif %}
                        <a href="{{ path('livraison_show', {'id': livraison.id}) }}"class="btn btn-xs btn-default command-edit"><i class="fas fa-eye fa-2x"></i></a>
                    </form>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="3">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
