{% extends 'layout.html.twig' %}

{% block title %}Articles index{% endblock %}

{% block page_content %} 

<form method="POST">
    <select name="status">
        <option>Non selectionné</option>
        <option value="en cours de reception">en cours de reception</option>
        <option value="demande de mise en stock">demande de mise en stock</option>
        <option value="en stock">En stock</option>
        <option value="destokage">destockage</option>
        <option value="demande de sortie">demande de sortie</option>
        <option value="anomalie">anomalie</option>
    </select>

    <button type="submit" class="btn pull-right button btn-right">
        Rechercher
    </button>
</form>
<h1>Articles</h1>
    <table class="table">
        <thead>
            <tr>
                <th>Nom</th>
                <th>Statut</th>
                <th>Conformité</th>
                <th>Reférences Articles</th>
                <th>position</th>
                <th>destination</th>
                <th>Quantite</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% set i = 0 %}
        {% for article in articles |reverse %}
            <tr {% if i % 2 == 1 %}
                    class="backtablejv"
                {% endif %}>
                {% set i = i + 1 %}
                <td>{{ article.nom }}</td>
                <td>{{ article.statu }}</td>
                <td>{{ article.etat ? 'oui' : article.commentaire }}</td>
                <td>{{ article.refArticle.reference }}</td>
                <td>{{ article.position }}</td>
                <td>{{ article.direction }}</td>
                <td>{{ article.quantite }}</td>
                <td>
                    <form method="POST">
                        <a href="{{ path('articles_show', {'id': article.id}) }}" class="btn btn-xs btn-default command-edit"><i class="fas fa-eye fa-2x"></i></a>
                        <a href="{{ path('articles_edit', {'id': article.id}) }}" class="btn btn-xs btn-default command-edit"><i class="fas fa-pencil-alt fa-2x"></i></a>
                        {% if article.statu == 'demande de mise en stock' %}
                            <button type="submit" class="btn btn-xs btn-default command-edit backgreen" name="miseEnStock" value="{{ article.id }}">
                                <i class="fas fa-check fa-2x"></i>
                            </button>
                        {% elseif article.statu == 'demande de sortie' %}
                            <button type="submit" class="btn btn-xs btn-default command-edit backgreen" name="demandeSortie" value="{{ article.id }}">
                                <i class="fas fa-check fa-2x"></i>
                            </button>
                        {% endif %}
                    </form>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="10">aucun résultat</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {{ knp_pagination_render(articles) }}
    {#<a href="{{ path('articles_new') }}">Create new</a>#}
{% endblock %}
